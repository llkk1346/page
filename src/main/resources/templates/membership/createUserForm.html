<!DOCTYPE html>
<html lang="en">
<head th:replace="fragments/header.html :: imy-header(회원가입)">
</head>
<body role="document">
<div th:replace="fragments/nav.html :: imy-nav('membership')"></div>
    <form id="userData">
        <div>
            <label for="userId">아이디</label>
            <input type="text" id="userId" name="userId" placeholder="아이디를 입력해주세요."/>
        </div>
        <div>
            <label for="userPw">비밀번호</label>
            <input type="password" id="userPw" name="userPw" placeholder="비밀번호를 입력해주세요."/>
        </div>
        <div>
            <label for="userPwOverlap">비밀번호 확인</label>
            <input type="password" id="userPwOverlap" name="userPwOverlap" placeholder="비밀번호 확인"/>
        </div>
        <div>
            <label for="userName">이름</label>
            <input type="text" id="userName" name="userName"/>
        </div>
        <div>
            <label for="userY">생년월일</label>
            <input type="text" id="userY" name="userY" placeholder="년(4자)"/>
            <label for="userM"></label>
            <select id="userM" name="userM">
                <option selected value="1">1월</option>
                <option value="2">2월</option>
                <option value="3">3월</option>
                <option value="4">4월</option>
                <option value="5">5월</option>
                <option value="6">6월</option>
                <option value="7">7월</option>
                <option value="8">8월</option>
                <option value="9">9월</option>
                <option value="10">10월</option>
                <option value="11">11월</option>
                <option value="12">12월</option>
            </select>
            <label for="userD"></label>
            <input type="text" id="userD" name="userD" placeholder="일"/>
        </div>
        <div>
        <label for="userSex">성별</label>
            <select id="userSex" name="userSex">
                <option value="0">성별</option>
                <option value="1">남자</option>
                <option value="2">여자</option>
            </select>
        </div>
        <div>
            <label for="userPhone">전화번호</label>
            <input type="text" id="userPhone" name="userPhone" placeholder="전화번호"/>
        </div>
        <div>
            <input type="hidden" id="authority" name="authority" value="1">
        </div>
        <div>
            <button type="button" onclick='saveUser()'>가입하기</button>
        </div>
    </form>
    <footer th:replace="fragments/footer.html :: imy-footer"></footer>
<script>
    function saveUser() {
        let formData = $('#userData').serialize();
        let url = "/membership/createUserForm";

        $.ajax({
            type: 'POST',
            url : url,
            data: formData,
            success: function (xhr,status,data ){
                if(data.status===200){
                    location.href="localhost:8080/";
                }
            },
            error: function (xhr, status, error) {
                console.log(error, xhr, status);
            }
        });
    }
</script>
</body>
</html>